<!DOCTYPE html>
<html>
<head>
<title>Lab 4</title>
  <link rel="stylesheet" href="index.css">
</head>

<body>
<script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.21.7.js"></script>

<script type="text/javascript">


  var pubnubDemo = new PubNub({
  publishKey: 'pub-c-b3c83e84-5548-48ac-bb78-70aa483770db',
  subscribeKey: 'sub-c-f86566a6-6cc9-11e9-a1d6-2a8c316da507'
  });

function sendMess() {

  pubnubDemo.publish({
    message: { "color" : "blue" },
    channel: 'north'
  });

    pubnubDemo.addListener({
      message: function(message){
        console.log(message)
      }
    })

    pubnubDemo.subscribe({
    channels: ['north']
    });

}

function init() {
  //Find our div containers in the DOM
  var dataContainerOrientation = document.getElementById('dataContainerOrientation');
  var dataContainerMotion = document.getElementById('dataContainerMotion');

  //Check for support for DeviceOrientation event
  if(window.DeviceOrientationEvent) {
    window.addEventListener('deviceorientation', function(event) {
            var alpha = event.alpha;
            var beta = event.beta;
            var gamma = event.gamma;

            if(alpha!=null || beta!=null || gamma!=null)
              dataContainerOrientation.innerHTML = 'alpha: ' + alpha + '<br/>beta: ' + beta + '<br />gamma: ' + gamma;
          }, false);
  }

  // Check for support for DeviceMotion events
  if(window.DeviceMotionEvent) {
  window.addEventListener('devicemotion', function(event) {
            var x = event.accelerationIncludingGravity.x;
            var y = event.accelerationIncludingGravity.y;
            var z = event.accelerationIncludingGravity.z;
            var r = event.rotationRate;
            var html = 'Acceleration:<br />';
            html += 'x: ' + x +'<br />y: ' + y + '<br/>z: ' + z+ '<br />';
            html += 'Rotation rate:<br />';
            if(r!=null) html += 'alpha: ' + r.alpha +'<br />beta: ' + r.beta + '<br/>gamma: ' + r.gamma + '<br />';
            dataContainerMotion.innerHTML = html;
          });
  }
}

</script>

<div id="dataContainerOrientation">
  No device orientation data
</div>
<div id="dataContainerMotion">
  No device motion data
</div>


</body>

</html>
